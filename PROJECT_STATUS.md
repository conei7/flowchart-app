# プロジェクトステータス - Flowchart Builder

## 📌 現在のバージョン: v1.2.16

## 🎯 プロジェクト概要

ReactとReactFlowを使用したモダンなフローチャート作成アプリケーション。ドラッグ＆ドロップでノードを配置し、視覚的にフローチャートを作成できます。

## ✅ 実装済み機能

### コア機能
- [x] ドラッグ＆ドロップでノード配置
- [x] 4種類のノード（開始、終了、処理、分岐）
- [x] ノード間の接続（方向付き矢印）
- [x] ダブルクリックでラベル編集
- [x] 全ノードのリサイズ対応
- [x] 自動レイアウト機能
- [x] キーボードショートカット（Ctrl+S/E/A/Z/Y/D, Escape）
- [x] Undo/Redo機能
- [x] ノード複製機能（Ctrl+D）
- [x] ショートカットヘルプ（?キー）
- [x] ノードの詳細設定（右側インスペクター、カスタムカラー、説明文）

### ファイル操作
- [x] プロジェクト保存（.fchart形式）
- [x] プロジェクト読み込み
- [x] PNG画像エクスポート（全体表示）
- [x] テキストエクスポート
- [x] Mermaidコピー

### ユーザー体験
- [x] 自動保存（localStorage）
- [x] ページリロード時の復元
- [x] 未保存時の警告表示
- [x] 折りたたみ式Controlsパネル
- [x] ダークテーマ（グラスモーフィズム）
- [x] ダークモード/ライトモード切替
- [x] UI言語英語統一

## 🏗️ アーキテクチャ

### ファイル構成
```
src/
├── components/
│   ├── FlowchartBuilder.tsx    # メインコンポーネント
│   ├── FlowchartBuilder.css    # スタイル
│   ├── Sidebar.tsx             # ノード選択サイドバー
│   └── nodes/
│       └── CustomNodes.tsx     # カスタムノード定義
├── utils/
│   └── export.ts               # エクスポート機能
└── App.tsx                     # ルートコンポーネント
```

### 技術スタック
| 技術 | 用途 |
|------|------|
| React | UIフレームワーク |
| TypeScript | 型安全性 |
| ReactFlow | フローチャートライブラリ |
| Vite | ビルドツール |
| Lucide React | アイコン |
| html-to-image | PNG出力 |

## 📋 バージョン履歴

| バージョン | 変更内容 |
|-----------|---------|
| v1.2.16 | バグ修正：初回ドラッグ＆ドロップ時の位置ずれ修正（座標計算ロジック改善） |
| v1.2.15 | スマホ対応（レスポンシブデザイン）、タップでノード追加機能 |
| v1.2.14 | インスペクターでのラベル編集がノードに即反映、Notes→Descriptionに名称変更 |
| v1.2.13 | インスペクター折りたたみ機能追加（Label/Color/Notes）、選択ハイライトの維持改善 |
| v1.2.12 | バグ修正：ノードのドラッグ追従性改善、条件分岐ノードの枠線表示修正 |
| v1.2.11 | ノード削除機能を追加（Backspaceキー、インスペクターの削除ボタン） |
| v1.2.10 | ノードのリサイズもundo/redo対象に（width/height/styleを履歴に含む） |
| v1.2.9 | 履歴管理のパフォーマンス改善（デバウンス、ドラッグ中スキップ） |
| v1.2.8 | 全ノードの選択スタイルをdrop-shadowに統一、エッジ選択時は元の色を維持 |
| v1.2.7 | 条件分岐ノードの選択スタイルをダイヤモンド形に対応、Fit Viewがインスペクター考慮 |
| v1.2.6 | 条件分岐ノードの選択スタイル修正、ライトモードControlsボタン修正 |
| v1.2.5 | ヘッダーにヘルプボタン(?アイコン)追加、サイドバーノードホバー時の横スクロールバー修正、トグルボタン表示修正 |
| v1.2.4 | ライトモードの色調改善、サイドバータイトル縮小、開閉アニメーション改善、ヘルプの開き方表示追加、Startノード重複確認ダイアログ |
| v1.2.3 | ダークモード/ライトモード切替ボタン追加（右上） |
| v1.2.2 | ヘッダーサイズ縮小・左寄せ、インスペクターのヘッダー考慮、Controlsパネルのインスペクター対応、サイドバー折りたたみ時Auto Layout下部配置 |
| v1.2.1 | UI言語英語統一、キーボードショートカットヘルプ表示改善（Ctrl+Y追加） |
| v1.2.0 | ノードの詳細設定機能（Unity風右側インスペクター、カスタムカラー、説明文） |
| v1.1.12 | キーボードショートカットヘルプモーダル追加（?キーで表示） |
| v1.1.11 | ノード複製機能追加（Ctrl+Dで選択ノードを複製） |
| v1.1.10 | Undo/Redo機能追加（Ctrl+Z/Ctrl+Shift+Z、履歴管理） |
| v1.1.9 | キーボードショートカット機能追加（Ctrl+S/E/A, Escape） |
| v1.1.8 | ノード・エッジ選択時のパルスアニメーション・グローエフェクト追加 |
| v1.1.7 | PNG保存後のビューポジション復元機能追加 |
| v1.1.6 | TypeScript型エラー修正（nodes/edges型定義改善）、未使用変数reactFlowBounds削除 |
| v1.1.5 | Start/Endノードのテキスト編集・リサイズ対応、Auto Layoutをサイドバーに移動、ハンドルサイズ・色統一 |
| v1.1.4 | Controlsパネル折りたたみ機能（ドロップダウンアニメーション） |
| v1.1.3 | localStorage自動保存、未保存警告 |
| v1.1.2 | UI整理、Auto Layoutを左下に移動 |
| v1.1.1 | アイコン改善、Text/Mermaidエクスポート復活 |
| v1.1.0 | プロジェクト保存/読み込み機能（.fchart形式） |
| v1.0.8 | 全体表示PNG出力 |
| v1.0.0 | 初回リリース |

## 🐛 既知の問題・修正予定

### バグ修正（優先度高）
- [x] ~~サイドバー折りたたみ時のAuto Layoutボタンが上部にある~~ → ✅ v1.2.2で下部に配置
- [x] ~~インスペクターが上部リボン（ヘッダー）を無視して開く~~ → ✅ v1.2.2でヘッダー高さを考慮
- [x] ~~インスペクター展開時にControlsパネルが隠れる~~ → ✅ v1.2.2でミニマップと同様に左にずらす
- [x] 初回ドラッグ＆ドロップ時の位置ずれ修正 → ✅ v1.2.16で修正（座標計算を手動実装に変更）
- [x] ~~ノードのドラッグ追従性が悪い（遅延がある）~~ → ✅ CSSのtransformトランジションを削除
- [x] ~~条件分岐ノードだけ枠線がない（他ノードと統一する）~~ → ✅ 常時枠線表示に変更

### UI/UX改善
- [x] ~~ヘッダー（リボン）のサイズを小さくする~~ ✅ v1.2.2で実装
- [x] ~~ヘッダーのタイトル・サブタイトルを左寄せにする~~ ✅ v1.2.2で実装

## 🔜 今後の予定

### 機能追加
- [x] ~~ノードの詳細設定（カスタムカラー、説明文など）~~ ✅ v1.2.0で実装
- [x] ~~Undo/Redo機能~~ ✅ v1.1.10で実装
- [x] ~~キーボードショートカット~~ ✅ v1.1.9で実装
- [x] ~~ダークモード/ライトモード切替ボタン（右上）~~ ✅ v1.2.3で実装
- [ ] インスペクターのカラーピッカー改善（RGBカラーホイール、カスタムカラー保存）
- [ ] 追加ノード形状（六角形：繰り返し、その他フローチャート図形）
- [ ] ノードのグループ化機能
- [ ] テンプレート機能

### UI/UX改善
- [x] ~~ノード・エッジ選択時のアニメーション改善~~ ✅ v1.1.8で改善
- [x] ~~PNG保存時にビュー位置が移動しないように修正~~ ✅ v1.1.7で修正
- [ ] スマホ対応（レスポンシブデザイン、タッチ操作対応）

## 🔗 リポジトリ

**GitHub**: https://github.com/conei7/flowchart-app

## 📅 最終更新

2025年12月8日

## 📝 開発ルール

### コミット・プッシュ手順
1. **修正** - コードを編集する
2. **確認** - ビルド成功とブラウザでの動作確認を必ず行う
3. **バージョンアップ** - `FlowchartBuilder.tsx`の`APP_VERSION`と`PROJECT_STATUS.md`のバージョンを更新
4. **README更新** - `README.md`の機能一覧やスクリーンショットを必要に応じて更新
5. **プッシュ** - git add, commit, push

**⚠️ 注意**: バージョン番号は**コミット時のみ**更新する（開発途中では更新しない）

### コミットメッセージ形式
```
vX.X.X - コミットメッセージ（日本語）
```

例：
- `v1.2.6 - 条件分岐ノードの選択スタイル修正`
- `v1.2.5 - ヘルプボタン追加、トグルボタン表示修正`
